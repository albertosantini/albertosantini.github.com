---
layout: default
title: Mataf Signals
yui: 3.6.0
yuiskin: yui3-skin-sam
---
<h2>{{ page.title }}</h2>

<p>This example demonstrates how to make html scraping with YUI using YQL.
</p>

<div id="container"></div>

<script type="text/javascript">
/*jslint sloppy:true */
/*global YUI */

YUI().use("node", "yql", function (Y) {
    var container = "", i, paths = [
        "http://www.mataf.net/en/forex/eurusd",
        "http://www.mataf.net/en/forex/usdchf",
        "http://www.mataf.net/en/forex/usdjpy",
        "http://www.mataf.net/en/forex/gbpusd",
        "http://www.mataf.net/en/forex/usdcad",
        "http://www.mataf.net/en/forex/gbpjpy",
        "http://www.mataf.net/en/forex/eurgbp",
        "http://www.mataf.net/en/forex/eurcad",
        "http://www.mataf.net/en/forex/eurjpy",
        "http://www.mataf.net/en/forex/audusd",
        "http://www.mataf.net/en/forex/euraud",
        "http://www.mataf.net/en/forex/eurchf"
    ];

    function roundNumber(num, dec) {
        return Math.round(num * Math.pow(10, dec)) / Math.pow(10, dec);
    }

    function myContainer(results) {
        var node, currency, entry, clock, stoploss, target1, riskreward1,
            sell = '<img height=12 width=12 ' +
            'src="http://www.mataf.net/images/_V3img/fleches/down.png">' +
            '<\/img>',
            buy = '<img height=12 width=12 ' +
            'src="http://www.mataf.net/images/_V3img/fleches/up.png">' +
            '<\/img>',
            flat = '<img height=12 width=12 ' +
            'src="http://www.mataf.net/images/_V3img/fleches/flat.png">' +
            '<\/img>';

        node = Y.Node.create(results.results[0]);

        currency = node.all("h1.top1").get("text");
        entry = node.all("#entry").get("value");

        if (entry.length !== 0) {
            entry = entry[0];
//             clock = node.one("table.AT_analyse > tbody > tr > td")
//                 .get('text').split(" GMT")[0];
            stoploss = node.all("#stoploss").get("value");
            target1 = node.all("#t1").get("value");
            riskreward1 = Math.abs(roundNumber((target1 - entry) /
                    (stoploss - entry), 1));

            container += "<b>";
            if (stoploss > entry) {
                container += sell;
            } else {
                container += buy;
            }
//             container += currency + " (" + clock + ") - ";
            container += currency;
            container += " entry: " + entry;
            container += " stoploss: " + stoploss;
            container += " target1: " + target1;
            container += " rw: " + riskreward1;
            container += "<\/b>";
        } else {
            container += flat;
//             container += currency + " (" + clock + ") - ";
            container += currency;
            container += " no strategy";
        }
        container += "<br /><br />";
        Y.one('#container').setContent(container);
    }

    for (i = 0; i < paths.length; i = i + 1) {
        Y.YQL('select * from html where url="' + paths[i] + '"', myContainer,
            { format: 'xml' });
    }
});
</script>
